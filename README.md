# Telegram Order Bot V2

---

## ­ЪЄг­ЪЄф рЃЦрЃљрЃарЃЌрЃБрЃџрЃў рЃўрЃюрЃАрЃбрЃарЃБрЃЦрЃфрЃўрЃљ

### рЃцрЃБрЃюрЃЦрЃфрЃўрЃћрЃЉрЃў
- ­ЪЏњ рЃерЃћрЃЎрЃЋрЃћрЃЌрЃћрЃЉрЃўрЃА рЃЏрЃўрЃдрЃћрЃЉрЃљ Telegram-рЃерЃў
- ­Ъњ│ рЃњрЃљрЃЊрЃљрЃ«рЃЊрЃљ Payze (Sandbox рЃЊрЃљ Production)
- ­ЪЊё рЃерЃћрЃЎрЃЋрЃћрЃЌрЃћрЃЉрЃўрЃА рЃЕрЃљрЃгрЃћрЃарЃљ Google Sheets-рЃерЃў
- ­Ъћћ рЃњрЃљрЃЊрЃљрЃ«рЃЊрЃўрЃА рЃЊрЃљрЃЊрЃљрЃАрЃбрЃБрЃарЃћрЃЉрЃўрЃА рЃљрЃЋрЃбрЃЮрЃЏрЃљрЃбрЃБрЃарЃў рЃерЃћрЃбрЃДрЃЮрЃЉрЃўрЃюрЃћрЃЉрЃљ
- ­Ъїљ рЃЏрЃљрЃарЃбрЃўрЃЋрЃў рЃњрЃљрЃерЃЋрЃћрЃЉрЃљ Render-рЃќрЃћ
- РџА 24/7 рЃЏрЃБрЃерЃљрЃЮрЃЉрЃљ Render-рЃўрЃА рЃБрЃцрЃљрЃАрЃЮ рЃЋрЃћрЃарЃАрЃўрЃљрЃќрЃћ

### Render-рЃќрЃћ 24/7 рЃЏрЃБрЃерЃљрЃЮрЃЉрЃўрЃА рЃБрЃќрЃарЃБрЃюрЃЋрЃћрЃџрЃДрЃЮрЃцрЃљ

Render-рЃўрЃА рЃБрЃцрЃљрЃАрЃЮ рЃЋрЃћрЃарЃАрЃўрЃљрЃќрЃћ рЃљрЃърЃџрЃўрЃЎрЃљрЃфрЃўрЃљ 15 рЃгрЃБрЃЌрЃў рЃўрЃюрЃљрЃЦрЃбрЃўрЃБрЃарЃЮрЃЉрЃўрЃА рЃерЃћрЃЏрЃЊрЃћрЃњ рЃўрЃФрЃўрЃюрЃћрЃЉрЃљ. рЃљрЃЏрЃўрЃА рЃњрЃљрЃЊрЃљрЃАрЃљрЃГрЃарЃћрЃџрЃљрЃЊ рЃњрЃљрЃЏрЃЮрЃДрЃћрЃюрЃћрЃЉрЃБрЃџрЃўрЃљ рЃарЃљрЃЏрЃЊрЃћрЃюрЃўрЃЏрЃћ рЃЏрЃўрЃЊрЃњрЃЮрЃЏрЃљ:

#### 1. рЃўрЃюрЃбрЃћрЃњрЃарЃўрЃарЃћрЃЉрЃБрЃџрЃў Self-Ping рЃАрЃўрЃАрЃбрЃћрЃЏрЃљ
- рЃЉрЃЮрЃбрЃў рЃљрЃЋрЃбрЃЮрЃЏрЃљрЃбрЃБрЃарЃљрЃЊ рЃљрЃњрЃќрЃљрЃЋрЃюрЃўрЃА ping-рЃћрЃЉрЃА рЃЌрЃљрЃЋрЃўрЃА рЃЌрЃљрЃЋрЃќрЃћ рЃДрЃЮрЃЋрЃћрЃџ 5 рЃгрЃБрЃЌрЃерЃў
- рЃЏрЃБрЃерЃљрЃЮрЃЉрЃА рЃЮрЃарЃў endpoint-рЃўрЃЌ: `/` рЃЊрЃљ `/ping`

#### 2. рЃфрЃљрЃџрЃЎрЃћ Pinger рЃАрЃћрЃарЃЋрЃўрЃАрЃў (рЃарЃћрЃЎрЃЮрЃЏрЃћрЃюрЃЊрЃћрЃЉрЃБрЃџрЃў)
- `render.yml`-рЃерЃў рЃЎрЃЮрЃюрЃцрЃўрЃњрЃБрЃарЃўрЃарЃћрЃЉрЃБрЃџрЃўрЃљ рЃЮрЃарЃў рЃАрЃћрЃарЃЋрЃўрЃАрЃў
- `bot-pinger` рЃАрЃћрЃарЃЋрЃўрЃАрЃў рЃЏрЃ«рЃЮрЃџрЃЮрЃЊ рЃЉрЃЮрЃбрЃА рЃљрЃњрЃќрЃљрЃЋрЃюрЃўрЃА ping-рЃћрЃЉрЃА
- рЃБрЃцрЃарЃЮ рЃћрЃцрЃћрЃЦрЃбрЃБрЃарЃўрЃљ рЃЋрЃўрЃЊрЃарЃћ self-ping

#### 3. рЃњрЃљрЃарЃћ рЃЏрЃЮрЃюрЃўрЃбрЃЮрЃарЃўрЃюрЃњрЃў (рЃАрЃљрЃБрЃЎрЃћрЃЌрЃћрЃАрЃЮ)
рЃњрЃљрЃЏрЃЮрЃўрЃДрЃћрЃюрЃћрЃЌ рЃБрЃцрЃљрЃАрЃЮ рЃЏрЃЮрЃюрЃўрЃбрЃЮрЃарЃўрЃюрЃњ рЃАрЃћрЃарЃЋрЃўрЃАрЃћрЃЉрЃў:
- **UptimeRobot**: https://uptimerobot.com/
- **Cron-job.org**: https://cron-job.org/
- **Pingdom**: https://tools.pingdom.com/

**рЃЎрЃЮрЃюрЃцрЃўрЃњрЃБрЃарЃљрЃфрЃўрЃљ:**
- URL: `https://your-bot.onrender.com/uptime`
- рЃўрЃюрЃбрЃћрЃарЃЋрЃљрЃџрЃў: 5-10 рЃгрЃБрЃЌрЃў
- рЃЏрЃћрЃЌрЃЮрЃЊрЃў: GET

#### 4. Health Check Endpoints
рЃЉрЃЮрЃбрЃў рЃњрЃЌрЃљрЃЋрЃљрЃќрЃЮрЃЉрЃЌ рЃарЃљрЃЏрЃЊрЃћрЃюрЃўрЃЏрЃћ endpoint-рЃА рЃЏрЃЮрЃюрЃўрЃбрЃЮрЃарЃўрЃюрЃњрЃўрЃАрЃЌрЃЋрЃўрЃА:
- `/` - рЃФрЃўрЃарЃўрЃЌрЃљрЃЊрЃў рЃАрЃбрЃљрЃбрЃБрЃАрЃў
- `/ping` - рЃЏрЃљрЃарЃбрЃўрЃЋрЃў ping
- `/health` - рЃАрЃарЃБрЃџрЃў рЃАрЃўрЃАрЃбрЃћрЃЏрЃўрЃА рЃАрЃбрЃљрЃбрЃБрЃАрЃў
- `/uptime` - рЃЏрЃЮрЃюрЃўрЃбрЃЮрЃарЃўрЃюрЃњрЃўрЃАрЃЌрЃЋрЃўрЃА

### рЃЊрЃљрЃДрЃћрЃюрЃћрЃЉрЃљ
1. рЃЊрЃљрЃљрЃЎрЃџрЃЮрЃюрЃўрЃарЃћ рЃърЃарЃЮрЃћрЃЦрЃбрЃў рЃЊрЃљ рЃЊрЃљрЃљрЃДрЃћрЃюрЃћ рЃЊрЃљрЃЏрЃЮрЃЎрЃўрЃЊрЃћрЃЉрЃБрЃџрЃћрЃЉрЃћрЃЉрЃў:
   ```bash
   pip install -r requirements.txt
   ```
2. рЃерЃћрЃЦрЃЏрЃћрЃюрЃў `.env` рЃцрЃљрЃўрЃџрЃў рЃљрЃю рЃЊрЃљрЃљрЃЏрЃљрЃбрЃћ рЃњрЃљрЃарЃћрЃЏрЃЮрЃА рЃфрЃЋрЃџрЃљрЃЊрЃћрЃЉрЃў:
   - TELEGRAM_BOT_TOKEN
   - ADMIN_CHAT_ID
   - SPREADSHEET_ID
   - WEBHOOK_URL (рЃЏрЃљрЃњ: https://your-app.onrender.com/webhook)
   - PAYZE_API_KEY (Sandbox рЃљрЃю Production)
   - PAYZE_MERCHANT_ID (Sandbox рЃљрЃю Production)
3. Google Sheets-рЃўрЃАрЃЌрЃЋрЃўрЃА рЃерЃћрЃЦрЃЏрЃћрЃюрЃў service account рЃЊрЃљ рЃљрЃбрЃЋрЃўрЃарЃЌрЃћ `credentials.json`.
4. рЃњрЃљрЃБрЃерЃЋрЃў рЃЉрЃЮрЃбрЃў:
   ```bash
   python main.py
   ```

### Render-рЃќрЃћ рЃњрЃљрЃерЃЋрЃћрЃЉрЃљ
- рЃљрЃбрЃЋрЃўрЃарЃЌрЃћ рЃърЃарЃЮрЃћрЃЦрЃбрЃў GitHub-рЃќрЃћ рЃЊрЃљ рЃЊрЃљрЃљрЃЎрЃЮрЃюрЃћрЃЦрЃбрЃћ Render-рЃќрЃћ.
- рЃЊрЃљрЃљрЃЏрЃљрЃбрЃћ рЃДрЃЋрЃћрЃџрЃљ рЃАрЃљрЃГрЃўрЃарЃЮ рЃњрЃљрЃарЃћрЃЏрЃЮрЃА рЃфрЃЋрЃџрЃљрЃЊрЃў Render-рЃўрЃА Settings-рЃерЃў.
- **рЃарЃћрЃЎрЃЮрЃЏрЃћрЃюрЃЊрЃћрЃЉрЃБрЃџрЃў**: рЃЊрЃљрЃљрЃЏрЃљрЃбрЃћ рЃњрЃљрЃарЃћ рЃЏрЃЮрЃюрЃўрЃбрЃЮрЃарЃўрЃюрЃњрЃў UptimeRobot-рЃўрЃЌ.
- рЃАрЃћрЃарЃЋрЃўрЃАрЃў рЃљрЃЋрЃбрЃЮрЃЏрЃљрЃбрЃБрЃарЃљрЃЊ рЃњрЃљрЃћрЃерЃЋрЃћрЃЉрЃљ рЃЊрЃљ рЃћрЃЦрЃюрЃћрЃЉрЃљ рЃАрЃљрЃ»рЃљрЃарЃЮ рЃЏрЃўрЃАрЃљрЃЏрЃљрЃарЃЌрЃў.

### рЃбрЃћрЃАрЃбрЃўрЃарЃћрЃЉрЃљ Payze-рЃА Sandbox-рЃўрЃЌ
- рЃњрЃљрЃЏрЃЮрЃўрЃДрЃћрЃюрЃћ рЃбрЃћрЃАрЃб рЃњрЃљрЃАрЃљрЃдрЃћрЃЉрЃћрЃЉрЃў рЃЊрЃљ Merchant ID.
- рЃбрЃћрЃАрЃб рЃЉрЃљрЃарЃљрЃЌрЃўрЃА рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃћрЃЉрЃў:
  - рЃЉрЃљрЃарЃљрЃЌрЃўрЃА рЃюрЃЮрЃЏрЃћрЃарЃў: 4977 0000 0000 3436
  - рЃЋрЃљрЃЊрЃљ: рЃюрЃћрЃЉрЃўрЃАрЃЏрЃўрЃћрЃарЃў рЃЏрЃЮрЃЏрЃљрЃЋрЃљрЃџрЃў рЃЌрЃЋрЃћ/рЃгрЃћрЃџрЃў
  - CVC: рЃюрЃћрЃЉрЃўрЃАрЃЏрЃўрЃћрЃарЃў 3-рЃюрЃўрЃерЃюрЃљ
- рЃњрЃљрЃЊрЃљрЃ«рЃЊрЃўрЃА рЃерЃћрЃЏрЃЊрЃћрЃњ рЃЉрЃЮрЃбрЃў рЃњрЃљрЃЏрЃЮрЃњрЃўрЃњрЃќрЃљрЃЋрЃюрЃўрЃА рЃерЃћрЃбрЃДрЃЮрЃЉрЃўрЃюрЃћрЃЉрЃљрЃА.

---

## ­ЪЄг­ЪЄД English Instructions

### Features
- ­ЪЏњ Receive orders in Telegram
- ­Ъњ│ Payze payments (Sandbox & Production)
- ­ЪЊё Save orders to Google Sheets
- ­Ъћћ Automatic notification after payment confirmation
- ­Ъїљ Easy deployment on Render
- РџА 24/7 operation on Render's free tier

### Keeping the Bot Awake on Render Free Tier

Render's free tier puts applications to sleep after 15 minutes of inactivity. Multiple approaches are implemented to solve this:

#### 1. Integrated Self-Ping System
- Bot automatically pings itself every 5 minutes
- Works with two endpoints: `/` and `/ping`

#### 2. Separate Pinger Service (Recommended)
- Two services configured in `render.yml`
- `bot-pinger` service only sends pings to the bot
- More effective than self-ping

#### 3. External Monitoring (Best)
Use free monitoring services:
- **UptimeRobot**: https://uptimerobot.com/
- **Cron-job.org**: https://cron-job.org/
- **Pingdom**: https://tools.pingdom.com/

**Configuration:**
- URL: `https://your-bot.onrender.com/uptime`
- Interval: 5-10 minutes
- Method: GET

#### 4. Health Check Endpoints
Bot provides several endpoints for monitoring:
- `/` - Main status
- `/ping` - Simple ping
- `/health` - Full system status
- `/uptime` - For monitoring

### Setup
1. Clone the project and install dependencies:
   ```bash
   pip install -r requirements.txt
   ```
2. Create a `.env` file or set environment variables:
   - TELEGRAM_BOT_TOKEN
   - ADMIN_CHAT_ID
   - SPREADSHEET_ID
   - WEBHOOK_URL (e.g. https://your-app.onrender.com/webhook)
   - PAYZE_API_KEY (Sandbox or Production)
   - PAYZE_MERCHANT_ID (Sandbox or Production)
3. For Google Sheets, create a service account and upload `credentials.json`.
4. Run the bot:
   ```bash
   python main.py
   ```

### Deploying on Render
- Push your project to GitHub and connect it to Render.
- Add all required environment variables in Render Settings.
- **Recommended**: Add external monitoring with UptimeRobot.
- The service will start automatically and have a public URL.

### Testing with Payze Sandbox
- Use test API key and Merchant ID.
- Test card details:
  - Card number: 4977 0000 0000 3436
  - Expiry: any future month/year
  - CVC: any 3 digits
- After payment, the bot will send you a confirmation message.
